<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>task28-1</title>
    <style type='text/css'>
    *{
      font-family: 'Microsoft YaHai';
    }

    #head{
      background: red;
      height: 80px;
      font-size:2rem;
    }
    #nav{
      background: blue;
      height:50px;
      font-size:2rem;
      margin-top: 20px;

    }
    #content{
      background: #ccc;
      min-height: 1000px;
      overflow: auto;
      padding: 20px;
    }
    #aside{
      background: green;
      height: 500px;
      width: 200px;
      float: left;
      font-size:32px;
    }

    #main{
      background: #fff;
      min-height: 900px;
      overflow: auto;
      padding-left: 20px;
      font-size:32px;
    }
    #footer{
      background: #000;
      height: 50px;
    }

    </style>
  </head>
  <body>
  <div id="head">head</div>

  <div id="nav">nav</div>

  <div id="content">
    <div id="aside">aside</div>
    <div id="main">main</div>
  </div>

  <div id="footer"></div>
  <script src='http://code.jquery.com/jquery-latest.js'></script>
  <script>

      var $ele=$('#nav'),
          eleW=$ele.width(),
          eleH=$ele.height(),
          offsetTop=$ele.offset().top,
          offsetLeft=$ele.offset().left;

          var $eleClone=$ele.clone()
                        .css({visibility:'hidden',display:'none'})
                        .insertBefore($eleClone);

          $(window).on('scroll',function(){
            var scrollTop=$(this).scrollTop();
            if(scrollTop>=offsetTop){
              if(!isFixed()){
                setFixed();
              }
            }else{
                if(isFixed()){
                  unsetFixed();
                }
              }
          })

          function isFixed(){
            return $ele.data('data-fixed')
          }

          function setFixed(){
            $ele.data('data-fixed',true);
            $ele.css({
              'position':'fixed',
              'top':'0',
              'left':offsetLeft,
              'margin':'0',
              'width':eleW,
              'z-index':'100'
            });

            $eleClone.show()
          }

          function unsetFixed(){
            $ele.data('data-fixed',false);
            $ele.removeAttr('style');
              $eleClone.hide();
            }

  </script>
  </body>
</html>
