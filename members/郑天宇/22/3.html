
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>事件代理</title>

</head>
<body>
<div id="wrap">
    <div class="d">Item 1</div>
    <div class="d">Item 2</div>
    <div class="d">Item 3</div>
    <a id="link" href="#">链接</a>
</div>
<button id="btn">添加</button>

<script type="text/javascript">
    var wrap = document.getElementById("wrap"),
            ds = wrap.getElementsByClassName("d"),
            link = document.getElementById("link"),
            btn = document.getElementById("btn");


    /*
     for(var i=0; i < ds.length; i++){
     ds[i].onclick = function(){
     console.log(this.innerHTML);
     }
     }
     link.onclick=function(){
     alert(1);
     }


     btn.onclick = function(){
     var node = document.createElement("div");
     node.setAttribute("class", "d");
     node.innerHTML = "hello" ;
     node.onclick = function(){
     console.log(this.innerHTML);
     }
     wrap.appendChild(node);
     }

     */

    wrap.onclick = function(e){
        console.log(e.target);
        if(e.target.id === "link"){
            alert(1);
        }
        if(e.target.className === "d"){
            console.log(e.target.innerHTML);
        }
    }


    btn.onclick = function(){
        var node = document.createElement("div");
        node.setAttribute("class", "d");
        node.innerHTML = "hello" ;
        //node.onclick = function(){
        //    console.log(this.innerHTML);
        //}
        wrap.appendChild(node);
    }




</script>
</body>
</html>