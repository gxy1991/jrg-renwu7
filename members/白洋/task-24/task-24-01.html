<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
<button type="button" id="btn">btn</button>
	<script>
	function ajax(opts){
    //一.设置默认参数
    var defaults = {    
            type: 'GET',
               url: '',
              data: '',        
             async: true,
             cache: true,
       contentType: 'application/x-www-form-urlencoded',
           success: function (){},
             error: function (){}
        };    
    //二.用户参数覆盖默认参数    
    for(var key in opts){
        defaults[key] = opts[key];
    }
    //三.开始编写ajax
    //1.创建ajax对象
    var oXhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP');
    //2.和服务器建立联系，告诉服务器你要取什么文件
    oXhr.open(defaults.type, defaults.url, defaults.async);
    //3.发送请求
    if(defaults.type === 'GET')    
        oXhr.send();
    else{
        oXhr.setRequestHeader("Content-type", defaults.contentType);
        oXhr.send(defaults.data);
    }    
    //4.等待服务器回应
    oXhr.onreadystatechange = function (){
        if(oXhr.readyState === 4){
            if(oXhr.status === 200)
                defaults.success.call(oXhr, oXhr.responseText);
            else{
                defaults.error();
            }
        }
    };
}
document.querySelector('#btn').addEventListener('click', function(){
    ajax({
        url: '/comment/',   //接口地址
        type: 'post',               // 类型， post 或者 get,
        data: {
            username: 'xiaoming',
            password: 'abcd1234'
        },
        success: function(ret){
            console.log(ret);       // {status: 0}
        },
        error: function(){
           console.log('出错了')
        }
    })
});
	</script>
</body>
</html>